<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="inputGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="engineGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f093fb;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f5576c;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="recordGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="compareGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#43e97b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#38f9d7;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="35" font-family="Arial, sans-serif" font-size="22" font-weight="bold" text-anchor="middle" fill="#333">Data Flow: Golden Generation &amp; Comparison</text>

  <!-- Section 1: Input Generation -->
  <text x="200" y="70" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#555">1. Generate Input</text>

  <g filter="url(#shadow)">
    <rect x="50" y="85" width="140" height="60" rx="8" fill="url(#inputGrad)"/>
    <text x="120" y="112" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">generate_random</text>
    <text x="120" y="128" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">shape, qtype, seed</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="210" y="85" width="140" height="60" rx="8" fill="url(#inputGrad)"/>
    <text x="280" y="112" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">generate_weight</text>
    <text x="280" y="128" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">shape, qtype, init</text>
  </g>

  <!-- Arrow to Tensor -->
  <line x1="200" y1="145" x2="200" y2="170" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Tensor Box -->
  <g filter="url(#shadow)">
    <rect x="100" y="175" width="200" height="70" rx="8" fill="#fff" stroke="#667eea" stroke-width="2"/>
    <text x="200" y="198" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#333">Tensor</text>
    <text x="200" y="218" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">fp32: highest precision</text>
    <text x="200" y="233" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">quantized: compressed format</text>
  </g>

  <!-- Section 2: Execute Op -->
  <text x="500" y="70" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#555">2. Execute Op</text>

  <!-- Arrow from Tensor to Engine -->
  <line x1="300" y1="210" x2="380" y2="210" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Engine Box -->
  <g filter="url(#shadow)">
    <rect x="390" y="85" width="220" height="160" rx="8" fill="url(#engineGrad)"/>
    <text x="500" y="110" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">ExecutionEngine</text>

    <rect x="405" y="125" width="190" height="35" rx="4" fill="white" fill-opacity="0.9"/>
    <text x="500" y="148" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333">run_golden(pure_args)</text>

    <rect x="405" y="170" width="190" height="35" rx="4" fill="white" fill-opacity="0.9"/>
    <text x="500" y="193" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333">run_golden(quant_args)</text>

    <rect x="405" y="215" width="190" height="20" rx="4" fill="white" fill-opacity="0.9"/>
    <text x="500" y="230" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#333">record results</text>
  </g>

  <!-- Section 3: Record -->
  <text x="700" y="70" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#555">3. Record</text>

  <!-- Arrow to Record -->
  <line x1="610" y1="165" x2="630" y2="165" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- OpRecord Box -->
  <g filter="url(#shadow)">
    <rect x="640" y="85" width="140" height="160" rx="8" fill="url(#recordGrad)"/>
    <text x="710" y="110" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">OpRecord</text>

    <text x="710" y="135" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">inputs: Tensor[]</text>
    <text x="710" y="150" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">weights: Tensor[]</text>
    <text x="710" y="165" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">output: Tensor</text>
    <line x1="660" y1="175" x2="760" y2="175" stroke="white" stroke-width="1" stroke-opacity="0.5"/>
    <text x="710" y="195" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">golden_pure: fp32</text>
    <text x="710" y="210" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">golden_quant: fp32</text>
    <text x="710" y="230" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">qtype, op_name, id</text>
  </g>

  <!-- Section 4: Compare -->
  <text x="400" y="290" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#555">4. Compare with DUT</text>

  <!-- Arrow down -->
  <line x1="710" y1="245" x2="710" y2="305" stroke="#666" stroke-width="2"/>
  <line x1="710" y1="305" x2="550" y2="305" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- DUT Input -->
  <g filter="url(#shadow)">
    <rect x="100" y="310" width="140" height="50" rx="8" fill="#ff6b6b"/>
    <text x="170" y="340" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">DUT Output</text>
  </g>

  <!-- Arrow to Compare -->
  <line x1="240" y1="335" x2="280" y2="335" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Compare Box -->
  <g filter="url(#shadow)">
    <rect x="290" y="305" width="260" height="60" rx="8" fill="url(#compareGrad)"/>
    <text x="420" y="330" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">compare_3col</text>
    <text x="420" y="350" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">exact | fuzzy_pure | fuzzy_qnt</text>
  </g>

  <!-- Section 5: Result -->
  <text x="400" y="400" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#555">5. Status Result</text>

  <!-- Arrow to Result -->
  <line x1="420" y1="365" x2="420" y2="415" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Status Results -->
  <g filter="url(#shadow)">
    <rect x="120" y="420" width="100" height="40" rx="6" fill="#11998e"/>
    <text x="170" y="445" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">PERFECT</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="240" y="420" width="100" height="40" rx="6" fill="#56ab2f"/>
    <text x="290" y="445" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">PASS</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="360" y="420" width="120" height="40" rx="6" fill="#f7971e"/>
    <text x="420" y="445" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#333">QUANT_ISSUE</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="500" y="420" width="100" height="40" rx="6" fill="#cb2d3e"/>
    <text x="550" y="445" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">FAIL</text>
  </g>

  <!-- Footer -->
  <text x="400" y="485" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#999">AI Dev Tools - Golden Generation &amp; Verification Workflow</text>
</svg>
